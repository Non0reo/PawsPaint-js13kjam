:root {
    font-size: 8em;
    --black: #0C121F;
    --dark-blue: #0f1939;
    --blue: #37507e;
    --white: #fdfbdf;
    --std-anim: cubic-bezier(0.33, 1, 0.66, 1);
}

* {
    margin: 0;
}

body {
    background: 
        radial-gradient(circle at top left, #e3aa8764, transparent 50%),
        radial-gradient(circle at top right, #e3aa8764, transparent 50%),
        radial-gradient(#37457b, var(--dark-blue));
    display: flex;
    width: 100dvw;
    height: 100dvh;

    align-items: center;
    justify-content: center;

    overflow: hidden;
}

.grid {
    --rotX: 0deg;
    --rotZ: 0deg;
    display: grid;
    place-items: center;
    transition: transform 0.3s var(--std-anim);
    transform: perspective(700px) rotateX(calc(var(--rotX) + 50deg)) rotateZ(var(--rotZ)) translate3d(0rem, 0rem, 0rem);
    transform-style: preserve-3d;
}


/* Common */

.sprite {
    --rotX: 0;
    --rotY: 0;
    --rotZ: 0;
    
    --sprite-z-offset: 0rem;
    --sprite-y-offset: 0rem;

    width: 1rem;
    height: 1rem;
    image-rendering: pixelated;
    transition: transform 0.3s ease-in-out;
    transform-origin: center bottom;
    transform:
        translate3d(0, var(--sprite-y-offset), var(--sprite-z-offset))
        rotateY(var(--rotY))
        rotateZ(var(--rotZ))
        rotateX(var(--rotX));
}

.sprite[anim="no-animation"] {
    animation: none;
}

.sprite[anim="drop-animation"] {
    animation: apparition 1.5s var(--std-anim);
}

.sprite[anim="fade-animation"] {
    animation: fade-in 0.3s ease-out;
}

.sprite[anim="joy-animation"] {
    animation: joy-dance 1s ease-in-out infinite;
}

.entity-cat[anim="sad-animation"] {
    animation: sad 0.5s ease-out infinite alternate;
}


/* TILES BASE */

.nonwalkable {
    background-color: var(--black);
}

.walkable {
    /* background-color: var(--white); */
    background: url("/sprites/floor.webp");
    background-size: cover;
    image-rendering: pixelated;
    
    z-index: -10;
}

/* OBJS */

.obj {
    z-index: 10;
    background-image: url("/sprites/objects.webp");
    background-size: 4rem;
}

.obj-paint {
    background-position: 0rem 1rem;
}

.obj-yarn {
    background-position: -3rem 1rem;
}

.obj-soap {
    background-position: -2rem 1rem;
}

.obj-puddle {
    background-position: -1rem 1rem;
}

.obj-bucket {
    background-position: -0rem 2rem;
}

.obj-empty-bucket {
    background-position: -1rem 2rem;
}


.obj-puddle[anim="spread-animation"] {
    animation: puddle-spread 1s ease-in-out;
}

/* ENTITIES */

.entity-cat {
    background-image: url("/sprites/cat.webp");
    position: relative;
    background-size: 3rem;
    background-position: bottom left 0%;
    background-repeat: no-repeat;
    image-rendering: pixelated;
    z-index: 20;
    /* transform:
        translate3d(0, var(--sprite-y-offset), var(--sprite-z-offset))
        translate(0rem, 0rem)
        rotateZ(var(--rotZ))
        rotateX(var(--rotX)) */
        /* translate3d(0rem, 0rem, 0rem); */
        /* translate(2rem, 0rem); */
}

.entity-cat[anim="joy-animation"] {
    background-position: 100% 100%;
}

.entity-cat[anim="sad-animation"] {
    background-position: 50% 100%;
}



/* ANIMATIONS */

@keyframes apparition {
    0% {
        opacity: 0;
        scale: 0;
        transform:
            translate3d(0, var(--sprite-y-offset), calc(var(--sprite-z-offset) + 5rem))
            rotateZ(var(--rotZ))
            rotateX(var(--rotX));
    }
    100% {
        opacity: 1;
        scale: 1;
        transform:
            translate3d(0, var(--sprite-y-offset), var(--sprite-z-offset))
            rotateZ(var(--rotZ))
            rotateX(var(--rotX));
    }
}

@keyframes fade-in {
    0% { opacity: 0; scale: 0; }
    100% { opacity: 1; scale: 1; }
}

@keyframes joy-dance {
    0%, 100% {
        transform:
            translate3d(0, var(--sprite-y-offset), var(--sprite-z-offset))
            rotateZ(var(--rotZ))
            rotateX(var(--rotX))
            skewX(-10deg);
    }
    50% {
        transform:
            translate3d(0, var(--sprite-y-offset), var(--sprite-z-offset))
            rotateZ(var(--rotZ))
            rotateX(var(--rotX))
            skewX(10deg);
    }
}

@keyframes sad {
    0% {
        transform:
            translate3d(0, var(--sprite-y-offset), var(--sprite-z-offset))
            rotateZ(var(--rotZ))
            rotateX(var(--rotX))
            scaleY(1);
    }
    100% {
        transform:
            translate3d(0, var(--sprite-y-offset), var(--sprite-z-offset))
            rotateZ(var(--rotZ))
            rotateX(var(--rotX))
            scaleY(1.2);
    }
}

@keyframes puddle-spread {
    0% {
        scale: 0;
        opacity: 0;
    }
    50% {
        opacity: 1;
    }
    100% {
        scale: 1;
        opacity: 0;
    }
    
}